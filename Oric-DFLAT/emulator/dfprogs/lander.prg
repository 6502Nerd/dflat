def_start() reset t:t=rnd(t) _init() state=0 repeat  if state==0:_attract():endif  if state==1:_initGame():endif  if state==2:_playGame():endif  if state==3:_endGame():endif until 0enddef;def_init() paper 4:ink 3:text repeat:read c:if c<>-1  for i=0,7,1   read b:poke 0xb400+8*c+i,b  next endif:until c<0 hiresenddef;data 123data 0b000001data 0b000111data 0b001101data 0b001111data 0b001111data 0b000111data 0b001000data 0b111000data 125data 0b100000data 0b111000data 0b101100data 0b111100data 0b111100data 0b111000data 0b000100data 0b000111data -1;def_attract() state=1enddef;def_initGame() state=2 hires _drawObstacles()enddef;def_drawObstacles()	pixmode 1	for i=0,3,1	  line i,i,239-i,i:lineto 239-i,199-i	  lineto i,199-i:lineto i,i	nextenddef;def_playGame() x=4*100:y=4*100:dx=0:dy=0 g=2:sx=2:sy=6:p=0 xx=x/100:yy=y/100 pixmode 1:plot xx,yy,"{}" repeat  ox=xx:oy=yy  dy=dy+g  if dy>=200:dy=200:elif dy<=-200:dy=-200:endif  if dx>=200:dx=200:elif dx<=-200:dx=-200:endif  y=y+dy:x=x+dx  s=stick()  if s&1:dx=dx-sx:endif  if s&2:dx=dx+sx:endif  if s&4:dy=dy-sy:endif  xx=x/100:yy=y/100  if(xx<>ox)|(xy<>oy)   plot ox,oy,"{}"   p=pixel(xx+5,yy)+pixel(xx+3,yy+3)+pixel(xx,yy+7)+pixel(xx+2,yy+7)   p=p+pixel(xx+6,yy)+pixel(xx+9,yy+3)+pixel(xx+11,yy+7)+pixel(xx+10,yy+7)   plot xx,yy,"{}"  endif  ; println x,":",y,"  ",dx,":",dy,"  ",ddx,":",ddy until 0; pixmode 0:plot x,y,"{}" print chr(7) println dx,",",dy,"  ",ddx,",",ddy wait 100:y=0 state=1enddef