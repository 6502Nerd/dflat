** dflat readme **

All the files needed to assemble dflat are here.

For Quick Start
---------------
1) Go to the emulators folder
2) Run oricutron.exe
3) The emulator will start with Oric dflat as the default
See the emulator section for more information.


File structure
--------------

.\
- readme.txt	: This file
- make.bat		: DOS batch file to assemble the source and generate the binaries
- nppUDF.txt 	: User defined language file for syntax highlighting in notepad++
- as65.exe,.man	: as65 assembler - allowed to be distributed with .man file

bank\
- bank.s		: defines the content of the ROM bank as an asm source file
- bank0.lst		: listing file needed to generate patch files for the emulator

cia\
- cia.s			: routines to handle the Oric 6522 VIA

dflat\
- asm.i			: definitions for inline assembler
- asm.s			: inline assembler
- asmjmptab.s	: jump table for assembler tokens
- asmsymtab.s	: symbol table for assembler tokens
- dflat.i		: definitions for dflat
- dflat.s		: dflat bootstrap
- error.i		: definitions for error handler
- error.s		: error handler
- numop.s		: number *and* string operators
- proc.s		: procedure handling
- progedit.s	: program editing
- rtasm.s		: runtime for assembler
- rtjmptab.s	: jump table for dflat runtime
- rtsubs.s		: runtme subroutines for dflat keywords
- runtime.s		: runtime for dflat
- stack.s		: dflat operator and runtime stack
- tkasm.s		: tokensier for inline assembler
- tkjmptab.s	: jump table for dflat tokens
- tksymtab.s	: symbol table for dflat tokens
- tktyptab.s	: type table for dflat tokens
- tokenise.s	: dflat tokeniser
- toksubs.s		: tokeniser routines for dflat tokens
- var.s			: dflat variable handling

emulator\		: See section on emulator

inc\
- graph.i		: definitions for graphics / display
- includes.i	: main definitions and useful macros

io\
- io.i			: definitions for IO system
- io.s			: IO system

kernel\
- build.s		: this is a temp file generated by make.bat for the boot up message
- irq.s			: interrupt handling
- kernel.s		: machine initialisation and start up
- main.s		: main entry point after start up
- snd-low.s		: low level sound chip routines
- zeropage.i	: zeropage *and* other machine page allocations

keyboard\
keyboard.s		: keyboard handling

monitor\
cmd.s			: simple command line monitor

rom\
bank0.bin		: binary file generated by assembler
ORICD.ROM		: 4 copies of bank0.bin generated by make file for EEPROM burning

sound\
- sound.s		: sound handling

tape\
- tape.s		: tape handling

utils\
- intmath.s		: low level integer math rountines
- utils.s		: utility routines

vdp\
- font.s		: machine character font
- graph.s		: display handling



Emulator
--------
The emulator\ folder hosts the Oricutron emulator.  All folders and files are
standard emulator files except the following.

emulator\
oricutron.cfg	: updated configuration file which starts dflat by default
dftap2txt.exe	: convert a .tap file to text (only 'tsave' format)
dftap2wav.exe	: convert a .tap file to WAV
dftxt2tap.exe	: convert a text file to .tap (use 'tload' to load in emu)

emulator\dfprogs\
tetris.prg		: text file of tetris program

emulator\roms\
dflat.pch		: patch file required by oricutron for file load/save
dflat.rom		: rom file used by emulator - generated by make and copied to here

tapes\
tet.wav			: tetris wav file for using on real oric (use 'load')
tet.tap			: binary save of tetris program (use 'load')
tetris.tap		: tape file converted from text file (use 'tload')
others			: Any other tap files should be loaded with 'tload'

util\			: Source files for file utilities - see next section


File utilities
--------------
File utilities are needed to be able to convert between formats used by the
emulator, a text editor and a real Oric.

util\dftap2txt	: Takes a TAP file format as input and extracts the body as text
				  to allow editing in a PC text editor.
				  Usage : dftap2txt <source> <destination>
				  Where	: <source> is the file to be read in TAP format
						  <destination> is the file to be written in text format
				  Build in VS 2017 Community Edition as a CMake project
				  
util\dftap2wav	: Takes a TAP file format as input and creates a WAV file that can
				  be loaded on a real Oric.
				  Usage : dftap2wav [-b] [-dX] [-8|-11] [-a] <source> <destination>
				  Where : -b denotes a binary file with short interblock gaps
						  -dX allows custom interblock gap
						  -8 selects 8KHz sample rate
						  -11 select 11KHz sample rate (default)
						  -a finishes the file with some silence

utils\dftxt2tap	: Takes a text file format as input and generates a TAP file to
				  allow dflat programs to be edited in a PC text editor and then
				  loaded in to oricutron (then use dftap2wav to use on real Oric)
				  Usage : dftxt2tap [-l] <source> <destination>
				  Where : -lN prepends line numbers to the generated files, starting
						  at N and incrementing by 10
						  <source> is the file to be read in TAP format
						  <destination> is the text file to be written
						  
				  

				  


